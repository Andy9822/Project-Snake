#include <stdio.h>
#include <string.h>
FILE* seletor_fase(int n)
{
 FILE * arquivo;
  switch(n)
  {
    case 1:
      arquivo = fopen("mapa1.txt", "r");
      break;

    case 2:
      arquivo = fopen("mapa2.txt", "r");
      break;

    case 3:
      arquivo = fopen("mapa3.txt", "r");

  }
 return arquivo;
}
void cria_fase(int n,char matriz[31][31],int*linhas, int*colunas)
{

 FILE * PonteiroMapa;
 int i=0, j = 0;
 PonteiroMapa = seletor_fase(n) ;


 if (PonteiroMapa == NULL)
    perror("Arquivo nao pode ser aberto");


 else
 {
    fscanf(PonteiroMapa,"%d %d", linhas, colunas);

    char vetor[(*linhas)*(*colunas)];

    while(!feof(PonteiroMapa))                   //Enquanto nao acabar o arquivo
     {
      fgets(vetor,((*linhas)*(*colunas)),PonteiroMapa);
      for(j=0;j<*colunas;j++)
         matriz[i][j] = vetor[j];
      i++;
     }

/*    while(!feof(PonteiroMapa))                   //Enquanto nao acabar o arquivo
     {
      if(fgetc(PonteiroMapa) == '\n')
       i++;
       else
        for(j=0;j<*colunas;j++)
        matriz[i][j] = fgetc(PonteiroMapa);
     }*/

printf("Matriz preenchida boy\n");
    for(i=1;i<=*linhas;i++)                //Começa pela linha 1 pois a 0 contem lixo / resto da linha onde tem numero de linhas e colunas
     { for(j=0;j<*colunas;j++)
         printf("%c ",matriz[i][j]);
         printf("\n");
     }

 }
fclose(PonteiroMapa);
}
int main ()
{
  int n = 1, linhas, colunas, i,j;
  char matriz[31][31];

  cria_fase(n,matriz,&linhas,&colunas);

 for(i=1;i<=linhas;i++)                //Começa pela linha 1 pois a 0 contem lixo / resto da linha onde tem numero de linhas e colunas
     { for(j=0;j<colunas;j++)
         printf("%c ",matriz[i][j]);
         printf("\n");
     }

 printf("Linhas = %d Colunas = %d\n", linhas,colunas);

return 0;
}
